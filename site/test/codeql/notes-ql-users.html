
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Notes for legacy QL CLI users &#8212; CodeQL</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="CodeQL CLI changelog" href="codeql-cli/changelog.html" />

<title>CodeQL docs</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="_static/custom.css" type="text/css" />
<link rel="stylesheet" href="_static/primer.css" type="text/css" />


  </head>
  <body>
<header class="Header">
    <div class="Header-item--full">
        <a href="index.html" class="Header-link f2 d-flex flex-items-center">
            <!-- <%= octicon "mark-github", class: "mr-2", height: 32 %> -->
            <svg height="32" class="octicon octicon-mark-github mr-2" viewBox="0 0 16 16" version="1.1" width="32"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
            <span class="hide-sm">CodeQL documentation</span>
        </a>
    </div>
    <div class="Header-item hide-sm hide-md">
        <form class="search" action="search.html" method="get">
            <input class="form-control input-dark" type="text" name="q" placeholder="Search" />
            <input class="btn" type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
        <script type="text/javascript">$('#searchbox').show(0);</script>

        <div class="clearer"></div>
    </div>
    <div class="Header-item">

        <details class="dropdown details-reset details-overlay d-inline-block">
            <summary class="btn bg-gray-dark text-white border" aria-haspopup="true">
                CodeQL resources
                <div class="dropdown-caret"></div>
            </summary>

            <ul class="dropdown-menu dropdown-menu-se dropdown-menu-dark">
                <div class="dropdown-header">
                    Help docs
                </div>
                <li><a class="dropdown-item" href="https://help.semmle.com/QL/learn-ql/">Learn CodeQL</a></li>
                <li><a class="dropdown-item" href="https://help.semmle.com/codeql/codeql-tools.html">CodeQL tools</a>
                </li>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    Reference docs
                </div>
                <li><a class="dropdown-item" href="https://help.semmle.com/QL/ql-handbook/">QL language reference</a>
                <li><a class="dropdown-item" href="https://help.semmle.com/QL/ql-libraries.html">CodeQL libraries</a>
                <li><a class="dropdown-item" href="https://help.semmle.com/QL/ql-built-in-queries.html">CodeQL
                        queries</a>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    Source files
                </div>
                <li><a class="dropdown-item" href="https://github.com/github/codeql">CodeQL repository</a>
            </ul>
        </details>

    </div>

</header>
<main class="bg-gray-light clearfix">
<nav class="SideNav position-sticky top-0 col-lg-3 col-md-3 float-left p-4 hide-sm hide-md overflow-y-auto">

    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="codeql-overview.html">CodeQL overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="codeql-for-vscode.html">CodeQL for Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="codeql-cli.html">CodeQL CLI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Notes for legacy QL CLI users</a></li>
</ul>


</nav>


<div class="body col-sm-12 col-md-9 col-lg-9 float-left border-left">

    <div class="hide-lg hide-xl px-4 pt-4">
        
<div class="related" role="navigation" aria-label="related navigation">
    <ul>
        <li class="nav-item nav-item-0"><a href="index.html">CodeQL</a> &#187;</li> 
    </ul>
</div>
    </div>

    <article class="p-4 col-lg-10 col-md-10 col-sm-12">
        
  <div class="section" id="notes-for-legacy-ql-cli-users">
<h1>Notes for legacy QL CLI users<a class="headerlink" href="#notes-for-legacy-ql-cli-users" title="Permalink to this headline">¶</a></h1>
<p>If you’ve previously used the QL command-line tools (<code class="docutils literal"><span class="pre">odasa</span></code>), you’ll notice a
few key differences when you use the new CodeQL products:</p>
<ul class="simple">
<li>“QL snapshots” are now called <a class="reference internal" href="glossary.html#codeql-database"><span class="std std-ref">CodeQL databases</span></a>.</li>
<li>The process of creating a CodeQL database is much simpler and more streamlined.
There’s no need to create <code class="docutils literal"><span class="pre">projects</span></code> or <code class="docutils literal"><span class="pre">snapshots</span></code>—just check out the
code and build it using the CodeQL CLI <code class="docutils literal"><span class="pre">codeql</span> <span class="pre">database</span> <span class="pre">create</span></code> command.</li>
<li>Queries are run against CodeQL databases using the CodeQL CLI <code class="docutils literal"><span class="pre">codeql</span>
<span class="pre">database</span> <span class="pre">analyze</span></code> command.</li>
</ul>
<p>For more information, see “<a class="reference internal" href="codeql-cli/procedures/create-codeql-database.html"><span class="doc">Creating CodeQL databases</span></a>” and
“<a class="reference internal" href="codeql-cli/procedures/analyze-codeql-database.html"><span class="doc">Analyzing databases with the CodeQL CLI</span></a>.”
For detailed guidance about equivalent commands, see <a class="reference external" href="#overview-of-common-commands">Overview of common commands</a> below.</p>
<div class="section" id="database-compatibility-notes">
<span id="database-compatibiilty-notes"></span><h2>Database compatibility notes<a class="headerlink" href="#database-compatibility-notes" title="Permalink to this headline">¶</a></h2>
<p>A CodeQL database created by the CodeQL CLI serves the same purpose as a QL
snapshot created using <code class="docutils literal"><span class="pre">odasa</span></code>. They both contain a code database to query and
usually a source reference for results display. However, they are not identical
formats and, if you use the legacy QL tools alongside the CodeQL tools, you need
to make the adjustments described below.</p>
<blockquote class="pull-quote">
<div><p>Note</p>
<p>The CodeQL CLI currently extracts data from additional, external files in a
different way to the legacy QL tools. For example, when you run <code class="docutils literal"><span class="pre">codeql</span> <span class="pre">database</span> <span class="pre">create</span></code>
the CodeQL CLI extracts data from some relevant XML files for Java and C#, but not
for the other supported languages, such as JavaScript. This means that CodeQL databases
created using the CodeQL CLI may be slightly different from those obtained from LGTM.com or
created using the legacy QL command-line tools. As such, analysis results generated from
databases created using the CodeQL CLI may also differ from those generated from
databases obtained from elsewhere.</p>
</div></blockquote>
<div class="section" id="using-existing-ql-snapshots-created-by-the-legacy-cli">
<h3>Using existing QL snapshots created by the legacy CLI<a class="headerlink" href="#using-existing-ql-snapshots-created-by-the-legacy-cli" title="Permalink to this headline">¶</a></h3>
<p>Existing QL snapshots, exported using the legacy CLI, can be used with the new
CodeQL tools. Unzip the snapshot and treat the directory as a database. If it
was built with an earlier version of the legacy CLI, you may need to upgrade
the database using <code class="docutils literal"><span class="pre">codeql</span> <span class="pre">database</span> <span class="pre">upgrade</span></code>. For more information, see the
<a class="reference internal" href="codeql-cli/commands/database-upgrade.html"><span class="doc">database upgrade reference documentation</span></a>.</p>
</div>
<div class="section" id="preparing-a-codeql-database-for-import-into-codeql-for-eclipse">
<span id="database-compatibiilty-codeql-for-eclipse"></span><h3>Preparing a CodeQL database for import into CodeQL for Eclipse<a class="headerlink" href="#preparing-a-codeql-database-for-import-into-codeql-for-eclipse" title="Permalink to this headline">¶</a></h3>
<p>CodeQL databases are not directly compatible with CodeQL for Eclipse.
However, you can “bundle” a CodeQL database into the required format by running:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>codeql database bundle --include-uncompressed-source -o &lt;output-zip&gt; &lt;codeql-database&gt;
</pre></div>
</div>
<p>The resulting database can be imported directly into CodeQL for Eclipse. For more
information about the <code class="docutils literal"><span class="pre">bundle</span></code> command, see the <a class="reference internal" href="codeql-cli/commands/database-bundle.html"><span class="doc">database bundle reference documentation</span></a>.</p>
</div>
<div class="section" id="preparing-a-codeql-database-for-upload-into-lgtm-enterprise">
<h3>Preparing a CodeQL database for upload into LGTM Enterprise<a class="headerlink" href="#preparing-a-codeql-database-for-upload-into-lgtm-enterprise" title="Permalink to this headline">¶</a></h3>
<p>CodeQL databases cannot be directly uploaded to an LGTM Enterprise instance.
For more information, see <a class="reference external" href="https://help.semmle.com/lgtm-enterprise/admin/help/prepare-database-upload.html">Preparing CodeQL databases to upload to LGTM</a>
in the LGTM admin help.</p>
</div>
</div>
<div class="section" id="query-suites">
<h2>Query suites<a class="headerlink" href="#query-suites" title="Permalink to this headline">¶</a></h2>
<p>CodeQL includes a new, more flexible, format for query suites. Legacy query
suite definitions are not compatible with the new CodeQL tools. For more
information about CodeQL query suites, see “<a class="reference internal" href="codeql-cli/procedures/query-suites.html"><span class="doc">Creating CodeQL query suites</span></a>.”</p>
</div>
<div class="section" id="overview-of-common-commands">
<h2>Overview of common commands<a class="headerlink" href="#overview-of-common-commands" title="Permalink to this headline">¶</a></h2>
<p>If you’re switching from the legacy ODASA CLI to the new CodeQL CLI,
the table below shows which commands replace the most
common ODASA processes.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="17%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><code class="docutils literal"><span class="pre">odasa</span></code> command</th>
<th class="head">Corresponding <code class="docutils literal"><span class="pre">codeql</span></code> command</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">bootstrap</span></code></td>
<td>n/a</td>
<td>CodeQL analysis does not use <code class="docutils literal"><span class="pre">project</span></code> files during database creation. For more information about creating databases, see <a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/procedures/create-codeql-database.html">Creating CodeQL databases</a>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">addSnapshot</span></code>, <code class="docutils literal"><span class="pre">addLatestSnapshot</span></code></td>
<td>n/a</td>
<td>To obtain the version of the code you want to analyze, just run your normal check-out commands.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">buildSnapshot</span></code></td>
<td><a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/commands/database-create.html">database create</a></td>
<td>When creating a CodeQL database, you specfiy build commands in the command line, rather than in a project file. For more information, see <a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/procedures/create-codeql-database.html">Creating CodeQL databases</a>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">analyzeSnapshot</span></code></td>
<td><a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/commands/database-analyze.html">database analyze</a></td>
<td>For more information, see “<a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/procedures/analyze-codeql-database.html">Analyzing databases with the CodeQL CLI</a>.”</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">archiveSnapshot</span></code></td>
<td><a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/commands/database-cleanup.html">database cleanup</a></td>
<td>Use <code class="docutils literal"><span class="pre">database</span> <span class="pre">cleanup</span></code> to reduce the size of a CodeQL database by deleting temporary data.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">export</span></code></td>
<td><a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/commands/database-bundle.html">database bundle</a></td>
<td>You don’t need to export databases before adding them to VS Code. However, you should “bundle” CodeQL databases before using them with LGTM Enterprise, CodeQL for Eclipse, or CodeQL for Visual Studio. For more information, see <a class="reference external" href="https://help.semmle.com/lgtm-enterprise/admin/help/prepare-database-upload.html">Preparing CodeQL databases to upload to LGTM</a> in the LGTM admin help and the <a class="reference external" href="#database-compatibility-notes">Database compatibility notes</a>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">prepareQueries</span></code></td>
<td><a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/commands/query-compile.html">query compile</a></td>
<td>Queries are compiled when you run <code class="docutils literal"><span class="pre">database</span> <span class="pre">analyze</span></code> and other query-running commands. You can speed up compilation by running <code class="docutils literal"><span class="pre">query</span> <span class="pre">compile</span></code> separately using more threads.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">qltest</span></code></td>
<td><a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/commands/test-run.html">test run</a></td>
<td>For more information about running regression tests, see “<a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/procedures/test-queries.html">Testing custom queries</a>.”</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">runQuery</span></code></td>
<td><a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/commands/query-run.html">query run</a></td>
<td>Use <code class="docutils literal"><span class="pre">query</span> <span class="pre">run</span></code> to quickly view results in your terminal. To generate interpreted results that can be viewed in source code, use <code class="docutils literal"><span class="pre">database</span> <span class="pre">analyze</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">upgrade</span></code></td>
<td><a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/commands/database-upgrade.html">database upgrade</a></td>
<td>For more information, see “<a class="reference external" href="https://help.semmle.com/codeql/codeql-cli/procedures/upgrade-codeql-database.html">Upgrading CodeQL databases</a>.”</td>
</tr>
</tbody>
</table>
</div>
</div>


    </article>

    <!-- GitHub footer, with links to terms and privacy statement -->
    <div class="px-3 px-md-6 f6 py-4 d-sm-flex flex-justify-between flex-row-reverse flex-items-center border-top">
        <ul class="list-style-none d-flex flex-items-center mb-3 mb-sm-0 lh-condensed-ultra">
            <li class="mr-3">
                <a href="https://twitter.com/github" title="GitHub on Twitter" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 273.5 222.3" class="d-block" height="18">
                        <path
                            d="M273.5 26.3a109.77 109.77 0 0 1-32.2 8.8 56.07 56.07 0 0 0 24.7-31 113.39 113.39 0 0 1-35.7 13.6 56.1 56.1 0 0 0-97 38.4 54 54 0 0 0 1.5 12.8A159.68 159.68 0 0 1 19.1 10.3a56.12 56.12 0 0 0 17.4 74.9 56.06 56.06 0 0 1-25.4-7v.7a56.11 56.11 0 0 0 45 55 55.65 55.65 0 0 1-14.8 2 62.39 62.39 0 0 1-10.6-1 56.24 56.24 0 0 0 52.4 39 112.87 112.87 0 0 1-69.7 24 119 119 0 0 1-13.4-.8 158.83 158.83 0 0 0 86 25.2c103.2 0 159.6-85.5 159.6-159.6 0-2.4-.1-4.9-.2-7.3a114.25 114.25 0 0 0 28.1-29.1"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3">
                <a href="https://www.facebook.com/GitHub" title="GitHub on Facebook" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.3 15.4" class="d-block" height="18">
                        <path
                            d="M14.5 0H.8a.88.88 0 0 0-.8.9v13.6a.88.88 0 0 0 .8.9h7.3v-6h-2V7.1h2V5.4a2.87 2.87 0 0 1 2.5-3.1h.5a10.87 10.87 0 0 1 1.8.1v2.1h-1.3c-1 0-1.1.5-1.1 1.1v1.5h2.3l-.3 2.3h-2v5.9h3.9a.88.88 0 0 0 .9-.8V.8a.86.86 0 0 0-.8-.8z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3">
                <a href="https://www.youtube.com/github" title="GitHub on YouTube" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.17 13.6" class="d-block" height="16">
                        <path
                            d="M18.77 2.13A2.4 2.4 0 0 0 17.09.42C15.59 0 9.58 0 9.58 0a57.55 57.55 0 0 0-7.5.4A2.49 2.49 0 0 0 .39 2.13 26.27 26.27 0 0 0 0 6.8a26.15 26.15 0 0 0 .39 4.67 2.43 2.43 0 0 0 1.69 1.71c1.52.42 7.5.42 7.5.42a57.69 57.69 0 0 0 7.51-.4 2.4 2.4 0 0 0 1.68-1.71 25.63 25.63 0 0 0 .4-4.67 24 24 0 0 0-.4-4.69zM7.67 9.71V3.89l5 2.91z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3 flex-self-start">
                <a href="https://www.linkedin.com/company/github" title="GitHub on Linkedin" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18" class="d-block" height="18">
                        <path
                            d="M3.94 2A2 2 0 1 1 2 0a2 2 0 0 1 1.94 2zM4 5.48H0V18h4zm6.32 0H6.34V18h3.94v-6.57c0-3.66 4.77-4 4.77 0V18H19v-7.93c0-6.17-7.06-5.94-8.72-2.91z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://github.com/github" title="GitHub's organization" style="color: #959da5;">
                    <svg version="1.1" width="20" height="20" viewBox="0 0 16 16" class="octicon octicon-mark-github"
                        aria-hidden="true">
                        <path fill-rule="evenodd"
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                        </path>
                    </svg>
                </a>
            </li>
        </ul>
        <ul class="list-style-none d-flex text-gray">
            <li class="mr-3">&copy; 2020 GitHub, Inc.</li>
            <li class="mr-3"><a
                    href="https://docs.github.com/github/site-policy/github-terms-of-service"
                    class="link-gray">Terms </a></li>
            <li><a href="https://docs.github.com/github/site-policy/github-privacy-statement"
                    class="link-gray">Privacy </a></li>
        </ul>
    </div>
</div>
</main>

<script type="text/javascript">
    $(document).ready(function () {
        $(".toggle > *").hide();
        $(".toggle .name").show();
        $(".toggle .name").click(function () {
            $(this).parent().children().not(".name").toggle(400);
            $(this).parent().children(".name").toggleClass("open");
        })
    });
</script>

  </body>
</html>