<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="qldoc"><meta name="description" content="API documentation for CodeQL"><meta name="keywords" content="CodeQL,QL,MemoryMayNotBeFreed"><meta name="addsearch-category" content="C/C++ CodeQL library"><title>MemoryMayNotBeFreed</title><link rel="stylesheet" type="text/css" href="https://unpkg.com/@primer/css/dist/primer.css"><link rel="stylesheet" type="text/css" href="../../qldoc.css"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5Q9DBRM');</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5Q9DBRM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="Header text-white"><div class="Header-item"><svg class="octicon octicon-mark-github mr-2" height="32" viewbox="0 0 16 16" width="32"><path fill-rule="even-odd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></div><div class="Header-item--full f2 text-bold">CodeQL library for C/C++</div><div class="Header-item"><span>Version 1.26.0</span></div><div class="Header-item .text-gray-light"><div class="nav-section"><a href="../../index.html">Index</a></div></div><div class="Header-item"><a title="Search the CodeQL libraries" target="_blank" href="https://help.semmle.com/home/help/search-results-qldoc.html"><span class=".text-gray-light">Search</span></a></div></div><div id="main"><nav id="sidebar"><div id="sidebar-content" class="pt-2"><div class="nav-section"><p>For other CodeQL resources, including tutorials and examples, see <a href="https://help.semmle.com/QL/learn-ql/" class="learn-ql-link" target="_blank">Learning CodeQL</a><p>.</p></p><h2 class="section-heading"><a href="module.MemoryMayNotBeFreed.html" class="ref-link ref-module">MemoryMayNotBeFreed</a></h2><div class="doc-block"><ol class="section-links"><li></li><li></li><li><a href="module.MemoryMayNotBeFreed.html#Imports">Imports</a></li><li><a href="module.MemoryMayNotBeFreed.html#Predicates">Predicates</a></li><li><a href="module.MemoryMayNotBeFreed.html#Classes">Classes</a></li></ol></div></div></div></nav><div class="overflow-y-auto width-full pt-2"><div id="content"><div><h1 class="section-heading" id="MemoryMayNotBeFreed"><span><span>Query module <span><a href="module.MemoryMayNotBeFreed.html" class="ref-link ref-module" title="Query module MemoryMayNotBeFreed">MemoryMayNotBeFreed</a></span></span></span></h1></div><div><div class="doc-block"><div class="qldoc"><dl>
<dt>name</dt>
<dd>Memory may not be freed</dd>
<dt>description</dt>
<dd>A function may return before freeing memory that was allocated in the function. Freeing all memory allocated in the function before returning ties the lifetime of the memory blocks to that of the function call, making it easier to avoid and detect memory leaks.</dd>
<dt>kind</dt>
<dd>problem</dd>
<dt>id</dt>
<dd>cpp/memory-may-not-be-freed</dd>
<dt>problem.severity</dt>
<dd>warning</dd>
<dt>tags</dt>
<dd>efficiency
security
external/cwe/cwe-401</dd>
</dl>
</div></div></div><div><h2 class="subsection-heading" id="Imports">Imports</h2><div class="doc-block"><table><tbody><tr><td><a href="../MemoryFreed.qll/module.MemoryFreed.html" class="ref-link ref-module" title="Module MemoryFreed">MemoryFreed</a></td><td></td></tr><tr><td><a href="../../semmle/code/cpp/controlflow/StackVariableReachability.qll/module.StackVariableReachability.html" class="ref-link ref-module" title="Module StackVariableReachability">StackVariableReachability</a></td><td><span class="qldoc-summary"><p>Provides a library for working with local (intra-procedural) control-flow  reachability involving stack variables.</p>
</span></td></tr></tbody></table></div></div><div><h2 class="subsection-heading" id="Predicates">Predicates</h2><div class="doc-block"><table><tbody><tr><td><a href="predicate.MemoryMayNotBeFreed$allocCallOrIndirect.1.html" class="ref-link ref-predicate" title="Predicate MemoryMayNotBeFreed::allocCallOrIndirect">allocCallOrIndirect</a></td><td></td></tr><tr><td><a href="predicate.MemoryMayNotBeFreed$allocatedVariableReaches.3.html" class="ref-link ref-predicate" title="Predicate MemoryMayNotBeFreed::allocatedVariableReaches">allocatedVariableReaches</a></td><td><span class="qldoc-summary"><p>The value from allocation <code>def</code> is still held in Variable <code>v</code> upon entering <code>node</code>.</p>
</span></td></tr><tr><td><a href="predicate.MemoryMayNotBeFreed$allocationDefinition.2.html" class="ref-link ref-predicate" title="Predicate MemoryMayNotBeFreed::allocationDefinition">allocationDefinition</a></td><td></td></tr><tr><td><a href="predicate.MemoryMayNotBeFreed$allocationReaches.2.html" class="ref-link ref-predicate" title="Predicate MemoryMayNotBeFreed::allocationReaches">allocationReaches</a></td><td><span class="qldoc-summary"><p>The value returned by allocation <code>def</code> has not been freed, confirmed to be null,  or potentially leaked globally upon reaching <code>node</code>  (regardless of what variable  it&rsquo;s still held in, if any).</p>
</span></td></tr><tr><td><a href="predicate.MemoryMayNotBeFreed$assignedToFieldOrGlobal.2.html" class="ref-link ref-predicate" title="Predicate MemoryMayNotBeFreed::assignedToFieldOrGlobal">assignedToFieldOrGlobal</a></td><td></td></tr><tr><td><a href="predicate.MemoryMayNotBeFreed$freeCallOrIndirect.2.html" class="ref-link ref-predicate" title="Predicate MemoryMayNotBeFreed::freeCallOrIndirect">freeCallOrIndirect</a></td><td></td></tr><tr><td><a href="predicate.MemoryMayNotBeFreed$mayCallFunction.2.html" class="ref-link ref-predicate" title="Predicate MemoryMayNotBeFreed::mayCallFunction">mayCallFunction</a></td><td><span class="qldoc-summary"><p>&lsquo;call&rsquo; is either a direct call to f, or a possible call to f  via a function pointer.</p>
</span></td></tr><tr><td><a href="predicate.MemoryMayNotBeFreed$verifiedRealloc.3.html" class="ref-link ref-predicate" title="Predicate MemoryMayNotBeFreed::verifiedRealloc">verifiedRealloc</a></td><td><span class="qldoc-summary"><p>The point at which a call to &lsquo;realloc&rsquo; on &lsquo;v&rsquo; has been verified to  succeed.  A failed realloc does <em>not</em> free the input pointer, which  can cause memory leaks.</p>
</span></td></tr></tbody></table></div></div><div><h2 class="subsection-heading" id="Classes">Classes</h2><div class="doc-block"><table><tbody><tr><td><a href="type.MemoryMayNotBeFreed$AllocReachability.html" class="ref-link ref-type" title="Class MemoryMayNotBeFreed::AllocReachability">AllocReachability</a></td><td></td></tr><tr><td><a href="type.MemoryMayNotBeFreed$AllocVariableReachability.html" class="ref-link ref-type" title="Class MemoryMayNotBeFreed::AllocVariableReachability">AllocVariableReachability</a></td><td></td></tr></tbody></table></div></div></div></div></div><footer id="content-footer">Copyright 2020 GitHub Software UK Ltd.<a title="Privacy statement and tracking preferences" target="_blank" href="https://docs.github.com/github/site-policy/github-privacy-statement">Privacy Statement</a></footer></body></html>