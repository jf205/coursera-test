
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Predicates &#8212; QL language reference</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Queries" href="queries.html" />
    <link rel="prev" title="About the QL language" href="about-the-ql-language.html" />

<title>CodeQL docs</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="_static/custom.css" type="text/css" />
<link rel="stylesheet" href="_static/primer.css" type="text/css" />


  </head><body>
<header class="Header">
    <div class="Header-item--full">
        <a href="index.html" class="Header-link f2 d-flex flex-items-center">
            <!-- <%= octicon "mark-github", class: "mr-2", height: 32 %> -->
            <svg height="32" class="octicon octicon-mark-github mr-2" viewBox="0 0 16 16" version="1.1" width="32"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
            <span class="hide-sm">QL language reference</span>
        </a>
    </div>
    <div class="Header-item hide-sm hide-md">
        <form class="search" action="search.html" method="get">
            <input class="form-control input-dark" type="text" name="q" placeholder="Search" />
            <input class="btn" type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
        <script type="text/javascript">$('#searchbox').show(0);</script>

        <div class="clearer"></div>
    </div>
    <div class="Header-item">

        <details class="dropdown details-reset details-overlay d-inline-block">
            <summary class="btn bg-gray-dark text-white border" aria-haspopup="true">
                CodeQL resources
                <div class="dropdown-caret"></div>
            </summary>

            <ul class="dropdown-menu dropdown-menu-se dropdown-menu-dark">
                <div class="dropdown-header">
                    Help docs
                </div>
                <li><a class="dropdown-item" href="https://help.semmle.com/QL/learn-ql/">Learn CodeQL</a></li>
                <li><a class="dropdown-item" href="https://help.semmle.com/codeql/codeql-tools.html">CodeQL tools</a>
                </li>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    Reference docs
                </div>
                <li><a class="dropdown-item" href="https://help.semmle.com/QL/ql-handbook/">QL language reference</a>
                <li><a class="dropdown-item" href="https://help.semmle.com/QL/ql-libraries.html">CodeQL libraries</a>
                <li><a class="dropdown-item" href="https://help.semmle.com/QL/ql-built-in-queries.html">CodeQL
                        queries</a>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    Source files
                </div>
                <li><a class="dropdown-item" href="https://github.com/github/codeql">CodeQL repository</a>
            </ul>
        </details>

    </div>

</header>
<main class="bg-gray-light clearfix">
<nav class="SideNav position-sticky top-0 col-lg-3 col-md-3 float-left p-4 hide-sm hide-md overflow-y-auto">

    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about-the-ql-language.html">About the QL language</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Predicates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#defining-a-predicate">Defining a predicate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#recursive-predicates">Recursive predicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kinds-of-predicates">Kinds of predicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#binding-behavior">Binding behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="#database-predicates">Database predicates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="queries.html">Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="aliases.html">Aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="expressions.html">Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="formulas.html">Formulas</a></li>
<li class="toctree-l1"><a class="reference internal" href="annotations.html">Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="lexical-syntax.html">Lexical syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="name-resolution.html">Name resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation-of-ql-programs.html">Evaluation of QL programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ql-language-specification.html">QL language specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="qldoc-comment-specification.html">QLDoc comment specification</a></li>
</ul>


</nav>


<div class="body col-sm-12 col-md-9 col-lg-9 float-left border-left">

    <div class="hide-lg hide-xl px-4 pt-4">
        
<div class="related" role="navigation" aria-label="related navigation">
    <ul>
        <li class="nav-item nav-item-0"><a href="index.html">QL language reference</a> &#187;</li> 
    </ul>
</div>
    </div>

    <article class="p-4 col-lg-10 col-md-10 col-sm-12">
        
  <div class="section" id="predicates">
<span id="id1"></span><h1>Predicates<a class="headerlink" href="#predicates" title="Permalink to this headline">Â¶</a></h1>
<p>Predicates are used to describe the logical relations that make up a QL program.</p>
<p>Strictly speaking, a predicate evaluates to a set of tuples. For example, consider the
following two predicate definitions:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">predicate</span> <span class="n">isCountry</span><span class="p">(</span><span class="kt">string</span> <span class="n">country</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;Germany&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;Belgium&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;France&quot;</span>
<span class="p">}</span>

<span class="k">predicate</span> <span class="n">hasCapital</span><span class="p">(</span><span class="kt">string</span> <span class="n">country</span><span class="p">,</span> <span class="kt">string</span> <span class="n">capital</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;Belgium&quot;</span> <span class="k">and</span> <span class="n">capital</span> <span class="o">=</span> <span class="s">&quot;Brussels&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;Germany&quot;</span> <span class="k">and</span> <span class="n">capital</span> <span class="o">=</span> <span class="s">&quot;Berlin&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;France&quot;</span> <span class="k">and</span> <span class="n">capital</span> <span class="o">=</span> <span class="s">&quot;Paris&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p id="index-0">The predicate <code class="docutils literal notranslate"><span class="pre">isCountry</span></code> is the set of one-tuples <code class="docutils literal notranslate"><span class="pre">{(&quot;Belgium&quot;),(&quot;Germany&quot;),(&quot;France&quot;)}</span></code>,
while <code class="docutils literal notranslate"><span class="pre">hasCapital</span></code> is the set of two-tuples <code class="docutils literal notranslate"><span class="pre">{(&quot;Belgium&quot;,&quot;Brussels&quot;),(&quot;Germany&quot;,&quot;Berlin&quot;),(&quot;France&quot;,&quot;Paris&quot;)}</span></code>.
The <a class="reference external" href="https://en.wikipedia.org/wiki/Arity">arity</a> of these predicates is one and two, respectively.</p>
<p>In general, all tuples in a predicate have the same number of elements. The <strong>arity</strong> of
a predicate is that number of elements, not including a possible <code class="docutils literal notranslate"><span class="pre">result</span></code> variable. For more information, see â<a class="reference internal" href="#predicates-with-result"><span class="std std-ref">Predicates with result</span></a>.â</p>
<p>There are a number of <a class="reference external" href="ql-language-specification#built-ins">built-in predicates</a>
in QL. You can use these in any queries without needing to <a class="reference internal" href="modules.html#importing-modules"><span class="std std-ref">import</span></a>
any additional modules. In addition to these built-in predicates, you can also define your
own:</p>
<div class="section" id="defining-a-predicate">
<h2>Defining a predicate<a class="headerlink" href="#defining-a-predicate" title="Permalink to this headline">Â¶</a></h2>
<p>When defining a predicate, you should specify:</p>
<ol class="arabic simple">
<li>The keyword <code class="docutils literal notranslate"><span class="pre">predicate</span></code> (for a <a class="reference internal" href="#predicates-without-result"><span class="std std-ref">predicate without result</span></a>),
or the type of the result (for a <a class="reference internal" href="#predicates-with-result"><span class="std std-ref">predicate with result</span></a>).</li>
<li>The name of the predicate. This is an <a class="reference external" href="ql-language-specification#identifiers">identifier</a>
starting with a lowercase letter.</li>
<li>The arguments to the predicate, if any, separated by commas. For each argument, specify the
argument type and an identifier for the argument variable.</li>
<li>The predicate body itself. This is a logical formula enclosed in braces.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An <a class="reference internal" href="annotations.html#abstract"><span class="std std-ref">abstract</span></a> or <a class="reference internal" href="annotations.html#external"><span class="std std-ref">external</span></a> predicate has no body. To define such a predicate,
end the predicate definition with a semicolon (<code class="docutils literal notranslate"><span class="pre">;</span></code>) instead.</p>
</div>
<div class="section" id="predicates-without-result">
<span id="id2"></span><h3>Predicates without result<a class="headerlink" href="#predicates-without-result" title="Permalink to this headline">Â¶</a></h3>
<p>These predicate definitions start with the keyword <code class="docutils literal notranslate"><span class="pre">predicate</span></code>. If a value satisfies the
logical property in the body, then the predicate holds for that value.</p>
<p>For example:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">predicate</span> <span class="n">isSmall</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">i</span> <span class="k">in</span> <span class="p">[</span><span class="m">1</span> <span class="p">..</span> <span class="m">9</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">i</span></code> is an integer, then <code class="docutils literal notranslate"><span class="pre">isSmall(i)</span></code> holds if <code class="docutils literal notranslate"><span class="pre">i</span></code> is a positive
integer less than 10.</p>
</div>
<div class="section" id="predicates-with-result">
<span id="id3"></span><h3>Predicates with result<a class="headerlink" href="#predicates-with-result" title="Permalink to this headline">Â¶</a></h3>
<p id="index-1">You can define a predicate with result by replacing the keyword <code class="docutils literal notranslate"><span class="pre">predicate</span></code> with the type
of the result. This introduces the special variable <code class="docutils literal notranslate"><span class="pre">result</span></code>.</p>
<p>For example:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">getSuccessor</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">result</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="m">1</span> <span class="k">and</span>
  <span class="n">i</span> <span class="k">in</span> <span class="p">[</span><span class="m">1</span> <span class="p">..</span> <span class="m">9</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">i</span></code> is a positive integer less than 10, then the result of the predicate
is the successor of <code class="docutils literal notranslate"><span class="pre">i</span></code>.</p>
<p>Note that you can use <code class="docutils literal notranslate"><span class="pre">result</span></code> in the same way as any other argument to the predicate.
You can express the relation between <code class="docutils literal notranslate"><span class="pre">result</span></code> and other variables in any way you like.
For example, given a predicate <code class="docutils literal notranslate"><span class="pre">getAParentOf(Person</span> <span class="pre">x)</span></code> that returns parents of <code class="docutils literal notranslate"><span class="pre">x</span></code>, you can
define a âreverseâ predicate as follows:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="n">Person</span> <span class="n">getAChildOf</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">p</span> <span class="o">=</span> <span class="n">getAParentOf</span><span class="p">(</span><span class="k">result</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It is also possible for a predicate to have multiple results (or none at all) for each value
of its arguments. For example:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kt">string</span> <span class="n">getANeighbor</span><span class="p">(</span><span class="kt">string</span> <span class="n">country</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;France&quot;</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;Belgium&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;France&quot;</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;Germany&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;Germany&quot;</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;Austria&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;Germany&quot;</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;Belgium&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>In this case:</dt>
<dd><ul class="first last simple">
<li>The predicate call <code class="docutils literal notranslate"><span class="pre">getANeighbor(&quot;Germany&quot;)</span></code> returns two results: <code class="docutils literal notranslate"><span class="pre">&quot;Austria&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;Belgium&quot;</span></code>.</li>
<li>The predicate call <code class="docutils literal notranslate"><span class="pre">getANeighbor(&quot;Belgium&quot;)</span></code> returns no results, since <code class="docutils literal notranslate"><span class="pre">getANeighbor</span></code>
does not define a <code class="docutils literal notranslate"><span class="pre">result</span></code> for <code class="docutils literal notranslate"><span class="pre">&quot;Belgium&quot;</span></code>.</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="recursive-predicates">
<h2>Recursive predicates<a class="headerlink" href="#recursive-predicates" title="Permalink to this headline">Â¶</a></h2>
<p>A predicate in QL can be <strong>recursive</strong>. This means that it depends, directly or indirectly,
on itself.</p>
<p>For example, you could use recursion to refine the above example. As it stands, the relation
defined in <code class="docutils literal notranslate"><span class="pre">getANeighbor</span></code> is not symmetricâit does not capture the fact that if x is a
neighbor of y, then y is a neighbor of x. A simple way to capture this is to call this
predicate recursively, as shown below:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kt">string</span> <span class="n">getANeighbor</span><span class="p">(</span><span class="kt">string</span> <span class="n">country</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;France&quot;</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;Belgium&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;France&quot;</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;Germany&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;Germany&quot;</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;Austria&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="s">&quot;Germany&quot;</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;Belgium&quot;</span>
  <span class="k">or</span>
  <span class="n">country</span> <span class="o">=</span> <span class="n">getANeighbor</span><span class="p">(</span><span class="k">result</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now <code class="docutils literal notranslate"><span class="pre">getANeighbor(&quot;Belgium&quot;)</span></code> also returns results, namely <code class="docutils literal notranslate"><span class="pre">&quot;France&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;Germany&quot;</span></code>.</p>
<p>For a more general discussion of recursive predicates and queries, see â<a class="reference internal" href="recursion.html#recursion"><span class="std std-ref">Recursion</span></a>.â</p>
</div>
<div class="section" id="kinds-of-predicates">
<h2>Kinds of predicates<a class="headerlink" href="#kinds-of-predicates" title="Permalink to this headline">Â¶</a></h2>
<p id="non-member-predicates">There are three kinds of predicates, namely non-member predicates, member predicates, and
characteristic predicates.</p>
<p>Non-member predicates are defined outside a class, that is, they are not members of any class.</p>
<p>For more information about the other kinds of predicates, see <a class="reference internal" href="types.html#characteristic-predicates"><span class="std std-ref">characteristic predicates</span></a> and <a class="reference internal" href="types.html#member-predicates"><span class="std std-ref">member predicates</span></a> in the
â<a class="reference internal" href="types.html#classes"><span class="std std-ref">Classes</span></a>â topic.</p>
<p>Here is an example showing a predicate of each kind:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">getSuccessor</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// 1. Non-member predicate</span>
  <span class="k">result</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="m">1</span> <span class="k">and</span>
  <span class="n">i</span> <span class="k">in</span> <span class="p">[</span><span class="m">1</span> <span class="p">..</span> <span class="m">9</span><span class="p">]</span>
<span class="p">}</span>

<span class="k">class</span> <span class="n">FavoriteNumbers</span> <span class="k">extends</span> <span class="kt">int</span> <span class="p">{</span>
  <span class="n">FavoriteNumbers</span><span class="p">()</span> <span class="p">{</span>  <span class="c1">// 2. Characteristic predicate</span>
    <span class="k">this</span> <span class="o">=</span> <span class="m">1</span> <span class="k">or</span>
    <span class="k">this</span> <span class="o">=</span> <span class="m">4</span> <span class="k">or</span>
    <span class="k">this</span> <span class="o">=</span> <span class="m">9</span>
  <span class="p">}</span>

  <span class="kt">string</span> <span class="n">getName</span><span class="p">()</span> <span class="p">{</span>   <span class="c1">// 3. Member predicate for the class `FavoriteNumbers`</span>
    <span class="k">this</span> <span class="o">=</span> <span class="m">1</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;one&quot;</span>
    <span class="k">or</span>
    <span class="k">this</span> <span class="o">=</span> <span class="m">4</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;four&quot;</span>
    <span class="k">or</span>
    <span class="k">this</span> <span class="o">=</span> <span class="m">9</span> <span class="k">and</span> <span class="k">result</span> <span class="o">=</span> <span class="s">&quot;nine&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also annotate each of these predicates. See the list of
<a class="reference internal" href="annotations.html#annotations-overview"><span class="std std-ref">annotations</span></a> available for each kind of predicate.</p>
</div>
<div class="section" id="binding-behavior">
<span id="predicate-binding"></span><h2>Binding behavior<a class="headerlink" href="#binding-behavior" title="Permalink to this headline">Â¶</a></h2>
<p>It must be possible to evaluate a predicate in a finite amount of time, so the set it describes
is not usually allowed to be infinite. In other words, a predicate can only contain a finite number of tuples.</p>
<p>The QL compiler reports an error when it can prove that a predicate contains variables that
arenât constrained to a finite number of values. For more information, see â<a class="reference internal" href="evaluation-of-ql-programs.html#binding"><span class="std std-ref">Binding</span></a>.â</p>
<p>Here are a few examples of infinite predicates:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">  Compilation errors:</span>
<span class="cm">  ERROR: &quot;i&quot; is not bound to a value.</span>
<span class="cm">  ERROR: &quot;result&quot; is not bound to a value.</span>
<span class="cm">*/</span>
<span class="kt">int</span> <span class="n">multiplyBy</span><span class="m">4</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">result</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="m">4</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">  Compilation error:</span>
<span class="cm">  ERROR: &quot;str&quot; is not bound to a value.</span>
<span class="cm">*/</span>
<span class="k">predicate</span> <span class="n">shortString</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">str</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&lt;</span> <span class="m">10</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">multiplyBy4</span></code>, the argument <code class="docutils literal notranslate"><span class="pre">i</span></code> is declared as an <code class="docutils literal notranslate"><span class="pre">int</span></code>, which is an infinite
type. It is used in the binary operation <code class="docutils literal notranslate"><span class="pre">*</span></code>, which does not bind its operands.
<code class="docutils literal notranslate"><span class="pre">result</span></code> is unbound to begin with, and remains unbound since it is used in an equality
check with <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">*</span> <span class="pre">4</span></code>, which is also unbound.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">shortString</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code> remains unbound since it is declared with the infinite type
<code class="docutils literal notranslate"><span class="pre">string</span></code>, and the built-in function <code class="docutils literal notranslate"><span class="pre">length()</span></code> does not bind it.</p>
<div class="section" id="binding-sets">
<span id="index-2"></span><span id="id4"></span><h3>Binding sets<a class="headerlink" href="#binding-sets" title="Permalink to this headline">Â¶</a></h3>
<p>Sometimes you may want to define an âinfinite predicateâ anyway, because you only intend to
use it on a restricted set of arguments. In that case, you can specify an explicit binding
set using the <code class="docutils literal notranslate"><span class="pre">bindingset</span></code> <a class="reference internal" href="annotations.html#bindingset"><span class="std std-ref">annotation</span></a>. This annotation is valid for any
kind of predicate.</p>
<p>For example:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kr">bindingset[i]</span>
<span class="kt">int</span> <span class="n">multiplyBy</span><span class="m">4</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">result</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="m">4</span>
<span class="p">}</span>

<span class="k">from</span> <span class="kt">int</span> <span class="n">i</span>
<span class="k">where</span> <span class="n">i</span> <span class="k">in</span> <span class="p">[</span><span class="m">1</span> <span class="p">..</span> <span class="m">10</span><span class="p">]</span>
<span class="k">select</span> <span class="n">multiplyBy</span><span class="m">4</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>Although <code class="docutils literal notranslate"><span class="pre">multiplyBy4</span></code> is an infinite predicate, the above QL <a class="reference internal" href="queries.html#queries"><span class="std std-ref">query</span></a> is legal.
It first uses the <code class="docutils literal notranslate"><span class="pre">bindingset</span></code> annotation to state that the predicate <code class="docutils literal notranslate"><span class="pre">multiplyBy4</span></code> will be
finite provided that <code class="docutils literal notranslate"><span class="pre">i</span></code> is bound to a finite number of values. Then it uses the predicate in
a context where <code class="docutils literal notranslate"><span class="pre">i</span></code> is restricted to to the range <code class="docutils literal notranslate"><span class="pre">[1</span> <span class="pre">..</span> <span class="pre">10]</span></code>.</p>
<p>It is also possible to state multiple binding sets for a predicate. This can be done by adding
multiple binding set annotations, for example:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kr">bindingset[x] bindingset[y]</span>
<span class="k">predicate</span> <span class="n">plusOne</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">x</span> <span class="o">+</span> <span class="m">1</span> <span class="o">=</span> <span class="n">y</span>
<span class="p">}</span>

<span class="k">from</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span>
<span class="k">where</span> <span class="n">y</span> <span class="o">=</span> <span class="m">42</span> <span class="k">and</span> <span class="n">plusOne</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="k">select</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Multiple binding sets specified this way are independent of each other. The above example means:</dt>
<dd><ul class="first last simple">
<li>If <code class="docutils literal notranslate"><span class="pre">x</span></code> is bound, then <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are bound.</li>
<li>If <code class="docutils literal notranslate"><span class="pre">y</span></code> is bound, then <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are bound.</li>
</ul>
</dd>
</dl>
<p>That is, <code class="docutils literal notranslate"><span class="pre">bindingset[x]</span> <span class="pre">bindingset[y]</span></code>, which states that at least one of <code class="docutils literal notranslate"><span class="pre">x</span></code> or <code class="docutils literal notranslate"><span class="pre">y</span></code> must
be bound, is different from <code class="docutils literal notranslate"><span class="pre">bindingset[x,</span> <span class="pre">y]</span></code>, which states that both <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> must be
bound.</p>
<p>The latter can be useful when you want to declare a <a class="reference internal" href="#predicates-with-result"><span class="std std-ref">predicate with result</span></a> that takes multiple input arguments.
For example, the following predicate takes a string <code class="docutils literal notranslate"><span class="pre">str</span></code> and truncates it to a maximum length of <code class="docutils literal notranslate"><span class="pre">len</span></code> characters:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kr">bindingset[str, len]</span>
<span class="kt">string</span> <span class="n">truncate</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="n">str</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">len</span>
  <span class="k">then</span> <span class="k">result</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">len</span><span class="p">)</span>
  <span class="k">else</span> <span class="k">result</span> <span class="o">=</span> <span class="n">str</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can then use this in a <a class="reference internal" href="queries.html#select-clauses"><span class="std std-ref">select clause</span></a>, for example:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span> <span class="n">truncate</span><span class="p">(</span><span class="s">&quot;hello world&quot;</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="database-predicates">
<span id="id5"></span><h2>Database predicates<a class="headerlink" href="#database-predicates" title="Permalink to this headline">Â¶</a></h2>
<p>Each database that you query contains tables expressing relations between values. These tables
(âdatabase predicatesâ) are treated in the same way as other predicates in QL.</p>
<p>For example, if a database contains a table for persons, you can write
<code class="docutils literal notranslate"><span class="pre">persons(x,</span> <span class="pre">firstName,</span> <span class="pre">_,</span> <span class="pre">age)</span></code> to constrain <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">firstName</span></code>, and <code class="docutils literal notranslate"><span class="pre">age</span></code> to be the
first, second, and fourth columns of rows in that table.</p>
<p>The only difference is that you canât define database predicates in QL. They are defined by the
underlying database. Therefore, the available database predicates vary according to the
database that you are querying.</p>
</div>
</div>


    </article>

    <!-- GitHub footer, with links to terms and privacy statement -->
    <div class="px-3 px-md-6 f6 py-4 d-sm-flex flex-justify-between flex-row-reverse flex-items-center border-top">
        <ul class="list-style-none d-flex flex-items-center mb-3 mb-sm-0 lh-condensed-ultra">
            <li class="mr-3">
                <a href="https://twitter.com/github" title="GitHub on Twitter" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 273.5 222.3" class="d-block" height="18">
                        <path
                            d="M273.5 26.3a109.77 109.77 0 0 1-32.2 8.8 56.07 56.07 0 0 0 24.7-31 113.39 113.39 0 0 1-35.7 13.6 56.1 56.1 0 0 0-97 38.4 54 54 0 0 0 1.5 12.8A159.68 159.68 0 0 1 19.1 10.3a56.12 56.12 0 0 0 17.4 74.9 56.06 56.06 0 0 1-25.4-7v.7a56.11 56.11 0 0 0 45 55 55.65 55.65 0 0 1-14.8 2 62.39 62.39 0 0 1-10.6-1 56.24 56.24 0 0 0 52.4 39 112.87 112.87 0 0 1-69.7 24 119 119 0 0 1-13.4-.8 158.83 158.83 0 0 0 86 25.2c103.2 0 159.6-85.5 159.6-159.6 0-2.4-.1-4.9-.2-7.3a114.25 114.25 0 0 0 28.1-29.1"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3">
                <a href="https://www.facebook.com/GitHub" title="GitHub on Facebook" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.3 15.4" class="d-block" height="18">
                        <path
                            d="M14.5 0H.8a.88.88 0 0 0-.8.9v13.6a.88.88 0 0 0 .8.9h7.3v-6h-2V7.1h2V5.4a2.87 2.87 0 0 1 2.5-3.1h.5a10.87 10.87 0 0 1 1.8.1v2.1h-1.3c-1 0-1.1.5-1.1 1.1v1.5h2.3l-.3 2.3h-2v5.9h3.9a.88.88 0 0 0 .9-.8V.8a.86.86 0 0 0-.8-.8z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3">
                <a href="https://www.youtube.com/github" title="GitHub on YouTube" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.17 13.6" class="d-block" height="16">
                        <path
                            d="M18.77 2.13A2.4 2.4 0 0 0 17.09.42C15.59 0 9.58 0 9.58 0a57.55 57.55 0 0 0-7.5.4A2.49 2.49 0 0 0 .39 2.13 26.27 26.27 0 0 0 0 6.8a26.15 26.15 0 0 0 .39 4.67 2.43 2.43 0 0 0 1.69 1.71c1.52.42 7.5.42 7.5.42a57.69 57.69 0 0 0 7.51-.4 2.4 2.4 0 0 0 1.68-1.71 25.63 25.63 0 0 0 .4-4.67 24 24 0 0 0-.4-4.69zM7.67 9.71V3.89l5 2.91z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3 flex-self-start">
                <a href="https://www.linkedin.com/company/github" title="GitHub on Linkedin" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18" class="d-block" height="18">
                        <path
                            d="M3.94 2A2 2 0 1 1 2 0a2 2 0 0 1 1.94 2zM4 5.48H0V18h4zm6.32 0H6.34V18h3.94v-6.57c0-3.66 4.77-4 4.77 0V18H19v-7.93c0-6.17-7.06-5.94-8.72-2.91z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://github.com/github" title="GitHub's organization" style="color: #959da5;">
                    <svg version="1.1" width="20" height="20" viewBox="0 0 16 16" class="octicon octicon-mark-github"
                        aria-hidden="true">
                        <path fill-rule="evenodd"
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                        </path>
                    </svg>
                </a>
            </li>
        </ul>
        <ul class="list-style-none d-flex text-gray">
            <li class="mr-3">&copy; 2020 GitHub, Inc.</li>
            <li class="mr-3"><a
                    href="https://docs.github.com/github/site-policy/github-terms-of-service"
                    class="link-gray">Terms </a></li>
            <li><a href="https://docs.github.com/github/site-policy/github-privacy-statement"
                    class="link-gray">Privacy </a></li>
        </ul>
    </div>
</div>
</main>

<script type="text/javascript">
    $(document).ready(function () {
        $(".toggle > *").hide();
        $(".toggle .name").show();
        $(".toggle .name").click(function () {
            $(this).parent().children().not(".name").toggle(400);
            $(this).parent().children(".name").toggleClass("open");
        })
    });
</script>

  </body>
</html>